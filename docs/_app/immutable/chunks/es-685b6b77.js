function At(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function E(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?At(Object(e),!0).forEach(function(n){ve(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):At(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function fe(i){return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(i)}function C(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function M(i,t,e){return t&&Pt(i.prototype,t),e&&Pt(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function ve(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Wt(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&tt(i,t)}function Be(i){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(i)}function tt(i,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tt(i,t)}function wr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function br(i,t){if(i==null)return{};var e={},n=Object.keys(i),r,a;for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&(e[r]=i[r]);return e}function Sr(i,t){if(i==null)return{};var e=br(i,t),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,n)||(e[n]=i[n]))}return e}function kr(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Er(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kr(i)}function Vt(i){var t=wr();return function(){var n=Be(i),r;if(t){var a=Be(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Er(this,r)}}function gt(i,t){return Or(i)||Tr(i,t)||vt(i,t)||Pr()}function rt(i){return Ir(i)||Fr(i)||vt(i)||Ar()}function Ir(i){if(Array.isArray(i))return nt(i)}function Or(i){if(Array.isArray(i))return i}function Fr(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Tr(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var n=[],r=!0,a=!1,o,s;try{for(e=e.call(i);!(r=(o=e.next()).done)&&(n.push(o.value),!(t&&n.length===t));r=!0);}catch(u){a=!0,s=u}finally{try{!r&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function vt(i,t){if(!!i){if(typeof i=="string")return nt(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nt(i,t)}}function nt(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function Ar(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(i,t){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=vt(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}var _e=String.fromCharCode,Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",Me={};function Ct(i,t){if(!Me[i]){Me[i]={};for(var e=0;e<i.length;e++)Me[i][i.charAt(e)]=e}return Me[i][t]}var D={compressToBase64:function(t){if(t==null)return"";var e=D._compress(t,6,function(n){return Rt.charAt(n)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(t){return t==null?"":t==""?null:D._decompress(t.length,32,function(e){return Ct(Rt,t.charAt(e))})},compressToUTF16:function(t){return t==null?"":D._compress(t,15,function(e){return _e(e+32)})+" "},decompressFromUTF16:function(t){return t==null?"":t==""?null:D._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(t){for(var e=D.compress(t),n=new Uint8Array(e.length*2),r=0,a=e.length;r<a;r++){var o=e.charCodeAt(r);n[r*2]=o>>>8,n[r*2+1]=o%256}return n},decompressFromUint8Array:function(t){if(t==null)return D.decompress(t);for(var e=new Array(t.length/2),n=0,r=e.length;n<r;n++)e[n]=t[n*2]*256+t[n*2+1];var a=[];return e.forEach(function(o){a.push(_e(o))}),D.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return t==null?"":D._compress(t,6,function(e){return xt.charAt(e)})},decompressFromEncodedURIComponent:function(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),D._decompress(t.length,32,function(e){return Ct(xt,t.charAt(e))}))},compress:function(t){return D._compress(t,16,function(e){return _e(e)})},_compress:function(t,e,n){if(t==null)return"";var r,a,o="",s="",u="",l=2,d=3,c=2,f=0,_=0,p,h={},g={},v=[];for(p=0;p<t.length;p+=1)if(o=t.charAt(p),Object.prototype.hasOwnProperty.call(h,o)||(h[o]=d++,g[o]=!0),s=u+o,Object.prototype.hasOwnProperty.call(h,s))u=s;else{if(Object.prototype.hasOwnProperty.call(g,u)){if(u.charCodeAt(0)<256){for(r=0;r<c;r++)f=f<<1,_==e-1?(_=0,v.push(n(f)),f=0):_++;for(a=u.charCodeAt(0),r=0;r<8;r++)f=f<<1|a&1,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=a>>1}else{for(a=1,r=0;r<c;r++)f=f<<1|a,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)f=f<<1|a&1,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=a>>1}l--,l==0&&(l=Math.pow(2,c),c++),delete g[u]}else for(a=h[u],r=0;r<c;r++)f=f<<1|a&1,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=a>>1;l--,l==0&&(l=Math.pow(2,c),c++),h[s]=d++,u=String(o)}if(u!==""){if(Object.prototype.hasOwnProperty.call(g,u)){if(u.charCodeAt(0)<256){for(r=0;r<c;r++)f=f<<1,_==e-1?(_=0,v.push(n(f)),f=0):_++;for(a=u.charCodeAt(0),r=0;r<8;r++)f=f<<1|a&1,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=a>>1}else{for(a=1,r=0;r<c;r++)f=f<<1|a,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)f=f<<1|a&1,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=a>>1}l--,l==0&&(l=Math.pow(2,c),c++),delete g[u]}else for(a=h[u],r=0;r<c;r++)f=f<<1|a&1,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=a>>1;l--,l==0&&(l=Math.pow(2,c),c++)}for(a=2,r=0;r<c;r++)f=f<<1|a&1,_==e-1?(_=0,v.push(n(f)),f=0):_++,a=a>>1;for(;;)if(f=f<<1,_==e-1){v.push(n(f));break}else _++;return v.join("")},decompress:function(t){return t==null?"":t==""?null:D._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(t,e,n){var r=[],a=[],o={val:n(0),position:e,index:1},s=4,u=4,l=3,d="",c,f,_,p,h,g,v;for(c=0;c<3;c+=1)r[c]=c;for(_=0,h=Math.pow(2,2),g=1;g!=h;)p=o.val&o.position,o.position>>=1,o.position==0&&(o.position=e,o.val=n(o.index++)),_|=(p>0?1:0)*g,g<<=1;switch(_){case 0:for(_=0,h=Math.pow(2,8),g=1;g!=h;)p=o.val&o.position,o.position>>=1,o.position==0&&(o.position=e,o.val=n(o.index++)),_|=(p>0?1:0)*g,g<<=1;v=_e(_);break;case 1:for(_=0,h=Math.pow(2,16),g=1;g!=h;)p=o.val&o.position,o.position>>=1,o.position==0&&(o.position=e,o.val=n(o.index++)),_|=(p>0?1:0)*g,g<<=1;v=_e(_);break;case 2:return""}for(r[3]=v,f=v,a.push(v);;){if(o.index>t)return"";for(_=0,h=Math.pow(2,l),g=1;g!=h;)p=o.val&o.position,o.position>>=1,o.position==0&&(o.position=e,o.val=n(o.index++)),_|=(p>0?1:0)*g,g<<=1;switch(v=_){case 0:for(_=0,h=Math.pow(2,8),g=1;g!=h;)p=o.val&o.position,o.position>>=1,o.position==0&&(o.position=e,o.val=n(o.index++)),_|=(p>0?1:0)*g,g<<=1;r[u++]=_e(_),v=u-1,s--;break;case 1:for(_=0,h=Math.pow(2,16),g=1;g!=h;)p=o.val&o.position,o.position>>=1,o.position==0&&(o.position=e,o.val=n(o.index++)),_|=(p>0?1:0)*g,g<<=1;r[u++]=_e(_),v=u-1,s--;break;case 2:return a.join("")}if(s==0&&(s=Math.pow(2,l),l++),r[v])d=r[v];else if(v===u)d=f+f.charAt(0);else return null;a.push(d),r[u++]=f+d.charAt(0),s--,f=d,s==0&&(s=Math.pow(2,l),l++)}}},Rr="1.38.1",j={DEBUG:!1,LIB_VERSION:Rr},zt=Array.prototype,Yt=Object.prototype,We=Yt.toString,xr=Yt.hasOwnProperty,k=typeof window<"u"?window:{},he=k.navigator||{userAgent:""},L=k.document||{},V=he.userAgent,He=zt.forEach,Mt=zt.indexOf,Cr=Array.isArray,je={},P={log:function(){if(j.DEBUG&&!Y(window.console)&&window.console){for(var t=("__rrweb_original__"in window.console.log)?window.console.log.__rrweb_original__:window.console.log,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];try{t.apply(window.console,n)}catch{ue(n,function(o){t(o)})}}},error:function(){if(j.DEBUG&&!Y(window.console)&&window.console){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=["PostHog error:"].concat(e),a="__rrweb_original__"in window.console.error?window.console.error.__rrweb_original__:window.console.error;try{a.apply(window.console,r)}catch{ue(r,function(s){a(s)})}}},critical:function(){if(!Y(window.console)&&window.console){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=["PostHog error:"].concat(e),a="__rrweb_original__"in window.console.error?window.console.error.__rrweb_original__:window.console.error;try{a.apply(window.console,r)}catch{ue(r,function(s){a(s)})}}}},it=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},Mr=function(t){for(var e in t)typeof t[e]=="function"&&(t[e]=t[e].bind(t))};function w(i,t,e){if(i!=null){if(He&&Array.isArray(i)&&i.forEach===He)i.forEach(t,e);else if("length"in i&&i.length===+i.length){for(var n=0,r=i.length;n<r;n++)if(n in i&&t.call(e,i[n],n)===je)return}else for(var a in i)if(xr.call(i,a)&&t.call(e,i[a],a)===je)return}}function ue(i,t,e){if(Array.isArray(i)){if(He&&i.forEach===He)i.forEach(t,e);else if("length"in i&&i.length===+i.length){for(var n=0,r=i.length;n<r;n++)if(n in i&&t.call(e,i[n],n)===je)return}}}var F=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ue(n,function(a){for(var o in a)a[o]!==void 0&&(t[o]=a[o])}),t},ie=Cr||function(i){return We.call(i)==="[object Array]"},Jt=function(t){try{return/^\s*\bfunction\b/.test(t)}catch{return!1}},Nr=function(t,e){var n=!1;return t===null?n:Mt&&t.indexOf===Mt?t.indexOf(e)!=-1:(w(t,function(r){if(n||(n=r===e))return je}),n)};function m(i,t){return i.indexOf(t)!==-1}var ce=function(t){return t===Object(t)&&!ie(t)},Y=function(t){return t===void 0},Xt=function(t){return We.call(t)=="[object String]"},$r=function(t){return We.call(t)=="[object Date]"},Dr=function(t){return We.call(t)=="[object Number]"},Lr=function i(t){return w(t,function(e,n){$r(e)?t[n]=qr(e):ce(e)&&(t[n]=i(e))}),t},Ur=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},qr=function(t){function e(n){return n<10?"0"+n:n}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())},Zt=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(a){P.critical("Implementation error. Please turn on debug and contact support@posthog.com."),j.DEBUG&&P.critical(a)}}},Br=function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=Zt(t.prototype[e[n]])},Hr=function(t){for(var e in t)typeof t[e]=="function"&&(t[e]=Zt(t[e]))},at=function(t){var e={};return w(t,function(n,r){Xt(n)&&n.length>0&&(e[r]=n)}),e};function jr(i,t){var e=new Set;function n(r,a){if(r!==Object(r))return t?t(r,a):r;if(!e.has(r)){e.add(r);var o;return ie(r)?(o=[],ue(r,function(s){o.push(n(s))})):(o={},w(r,function(s,u){e.has(s)||(o[u]=n(s,u))})),o}}return n(i)}var Gr=["$performance_raw"];function Kt(i,t){return jr(i,function(e,n){return n&&Gr.indexOf(n)>-1?e:typeof e=="string"&&t!==null?e.slice(0,t):e})}function Ve(i){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e,n,r,a,o,s,u,l,d=0,c=0,f="",_=[];if(!i)return i;i=Qr(i);do e=i.charCodeAt(d++),n=i.charCodeAt(d++),r=i.charCodeAt(d++),l=e<<16|n<<8|r,a=l>>18&63,o=l>>12&63,s=l>>6&63,u=l&63,_[c++]=t.charAt(a)+t.charAt(o)+t.charAt(s)+t.charAt(u);while(d<i.length);switch(f=_.join(""),i.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"=";break}return f}var Qr=function(t){t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var e="",n,r,a=0,o;for(n=r=0,a=t.length,o=0;o<a;o++){var s=t.charCodeAt(o),u=null;s<128?r++:s>127&&s<2048?u=String.fromCharCode(s>>6|192,s&63|128):u=String.fromCharCode(s>>12|224,s>>6&63|128,s&63|128),u!==null&&(r>n&&(e+=t.substring(n,r)),e+=u,n=r=o+1)}return r>n&&(e+=t.substring(n,t.length)),e},le=function(){var i=function(){for(var r=new Date().valueOf(),a=0;r==new Date().valueOf();)a++;return r.toString(16)+a.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},e=function(){var r=V,a,o,s=0,u=[];function l(d,c){var f,_=0;for(f=0;f<c.length;f++)_|=u[f]<<f*8;return d^_}for(a=0;a<r.length;a++)o=r.charCodeAt(a),u.unshift(o&255),u.length>=4&&(s=l(s,u),u=[]);return u.length>0&&(s=l(s,u)),s.toString(16)};return function(){var n=(window.screen.height*window.screen.width).toString(16);return i()+"-"+t()+"-"+e()+"-"+n+"-"+i()}}(),Wr=function(t){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp|ahrefsbot|facebookexternalhit|facebookcatalog|applebot|semrushbot|duckduckbot|twitterbot|rogerbot|linkedinbot|mj12bot|sitebulb|bot.htm|bot.php)/i.test(t)},Vr=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",n,r,a=[];return w(t,function(o,s){n=encodeURIComponent(o.toString()),r=encodeURIComponent(s),a[a.length]=r+"="+n}),a.join(e)},Nt=function(t,e){var n=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r="[\\?&]"+n+"=([^&#]*)",a=new RegExp(r),o=a.exec(t);if(o===null||o&&typeof o[1]!="string"&&o[1].length)return"";var s=o[1];try{s=decodeURIComponent(s)}catch{P.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},$t=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},Pe=function(){var i=function(r,a,o,s,u){if(!r){P.error("No valid element provided to register_event");return}if(r.addEventListener&&!s)r.addEventListener(a,o,!!u);else{var l="on"+a,d=r[l];r[l]=t(r,o,d)}};function t(n,r,a){return function(o){if(o=o||e(window.event),!!o){var s=!0,u;Jt(a)&&(u=a(o));var l=r.call(n,o);return(u===!1||l===!1)&&(s=!1),s}}}function e(n){return n&&(n.preventDefault=e.preventDefault,n.stopPropagation=e.stopPropagation),n}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},i}(),T={campaignParams:function(){var t="utm_source utm_medium utm_campaign utm_content utm_term gclid fbclid msclkid".split(" "),e={};return w(t,function(n){var r=Nt(L.URL,n);r.length&&(e[n]=r)}),e},searchEngine:function(t){return t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(t){var e=T.searchEngine(t),n=e!="yahoo"?"q":"p",r={};if(e!==null){r.$search_engine=e;var a=Nt(t,n);a.length&&(r.ph_keyword=a)}return r},browser:function(t,e,n){return e=e||"",n||m(t," OPR/")?m(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":m(t,"IEMobile")||m(t,"WPDesktop")?"Internet Explorer Mobile":m(t,"SamsungBrowser/")?"Samsung Internet":m(t,"Edge")||m(t,"Edg/")?"Microsoft Edge":m(t,"FBIOS")?"Facebook Mobile":m(t,"Chrome")?"Chrome":m(t,"CriOS")?"Chrome iOS":m(t,"UCWEB")||m(t,"UCBrowser")?"UC Browser":m(t,"FxiOS")?"Firefox iOS":m(e,"Apple")?m(t,"Mobile")?"Mobile Safari":"Safari":m(t,"Android")?"Android Mobile":m(t,"Konqueror")?"Konqueror":m(t,"Firefox")?"Firefox":m(t,"MSIE")||m(t,"Trident/")?"Internet Explorer":m(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r=T.browser(t,e,n),a={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},o=a[r];if(o===void 0)return null;var s=t.match(o);return s?parseFloat(s[s.length-2]):null},browserLanguage:function(){return he.language||he.userLanguage},os:function(){var t=V;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)&&!/Mobile/.test(t)?"Android Tablet":/Android/.test(t)?"Android":""},deviceType:function(t){var e=this.device(t);return e==="iPad"||e==="Android Tablet"?"Tablet":e?"Mobile":"Desktop"},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},properties:function(){return F(at({$os:T.os(),$browser:T.browser(V,he.vendor,window.opera),$device:T.device(V),$device_type:T.deviceType(V)}),{$current_url:window.location.href,$host:window.location.host,$pathname:window.location.pathname,$browser_version:T.browserVersion(V,he.vendor,window.opera),$browser_language:T.browserLanguage(),$screen_height:window.screen.height,$screen_width:window.screen.width,$viewport_height:window.innerHeight,$viewport_width:window.innerWidth,$lib:"web",$lib_version:j.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Ur()/1e3})},people_properties:function(){return F(at({$os:T.os(),$browser:T.browser(V,he.vendor,window.opera)}),{$browser_version:T.browserVersion(V,he.vendor,window.opera)})}};function Ge(i){switch(fe(i.className)){case"string":return i.className;case"object":return("baseVal"in i.className?i.className.baseVal:null)||i.getAttribute("class")||"";default:return""}}function Dt(i){var t="";return st(i)&&!nr(i)&&i.childNodes&&i.childNodes.length&&w(i.childNodes,function(e){tr(e)&&e.textContent&&(t+=it(e.textContent).split(/(\s+)/).filter(De).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),it(t)}function er(i){return!!i&&i.nodeType===1}function ge(i,t){return!!i&&!!i.tagName&&i.tagName.toLowerCase()===t.toLowerCase()}function tr(i){return!!i&&i.nodeType===3}function rr(i){return!!i&&i.nodeType===11}var ot=["a","button","form","input","select","textarea","label"];function zr(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!i||ge(i,"html")||!er(i))return!1;if(e!=null&&e.url_allowlist){var n=window.location.href,r=e.url_allowlist;if(r&&!r.some(function(h){return n.match(h)}))return!1}if(e!=null&&e.dom_event_allowlist){var a=e.dom_event_allowlist;if(a&&!a.some(function(h){return t.type===h}))return!1}if(e!=null&&e.element_allowlist){var o=e.element_allowlist;if(o&&!o.some(function(h){return i.tagName.toLowerCase()===h}))return!1}if(e!=null&&e.css_selector_allowlist){var s=e.css_selector_allowlist;if(s&&!s.some(function(h){return i.matches(h)}))return!1}for(var u=!1,l=[i],d=!0,c=i;c.parentNode&&!ge(c,"body");){if(rr(c.parentNode)){l.push(c.parentNode.host),c=c.parentNode.host;continue}if(d=c.parentNode||!1,!d)break;if(ot.indexOf(d.tagName.toLowerCase())>-1)u=!0;else{var f=window.getComputedStyle(d);f&&f.getPropertyValue("cursor")==="pointer"&&(u=!0)}l.push(d),c=d}var _=window.getComputedStyle(i);if(_&&_.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var p=i.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return t.type==="submit";case"input":return t.type==="change"||t.type==="click";case"select":case"textarea":return t.type==="change"||t.type==="click";default:return u?t.type==="click":t.type==="click"&&(ot.indexOf(p)>-1||i.getAttribute("contenteditable")==="true")}}function st(i){for(var t=i;t.parentNode&&!ge(t,"body");t=t.parentNode){var e=Ge(t).split(" ");if(m(e,"ph-sensitive")||m(e,"ph-no-capture"))return!1}if(m(Ge(i).split(" "),"ph-include"))return!0;var n=i.type||"";if(typeof n=="string")switch(n.toLowerCase()){case"hidden":return!1;case"password":return!1}var r=i.name||i.id||"";if(typeof r=="string"){var a=/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i;if(a.test(r.replace(/[^a-zA-Z0-9]/g,"")))return!1}return!0}function nr(i){var t=["button","checkbox","submit","reset"];return!!(ge(i,"input")&&!t.includes(i.type)||ge(i,"select")||ge(i,"textarea")||i.getAttribute("contenteditable")==="true")}function De(i){if(i===null||Y(i))return!1;if(typeof i=="string"){i=it(i);var t=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;if(t.test((i||"").replace(/[- ]/g,"")))return!1;var e=/(^\d{3}-?\d{2}-?\d{4}$)/;if(e.test(i))return!1}return!0}function Yr(i){return typeof i=="string"?i.substring(0,10)==="_ngcontent"||i.substring(0,7)==="_nghost":!1}function ir(i,t){var e=document.createElement("script");e.type="text/javascript",e.src=i,e.onload=t;var n=document.getElementsByTagName("script");if(n.length>0){var r;(r=n[0].parentNode)===null||r===void 0||r.insertBefore(e,n[0])}else document.body.appendChild(e)}var Jr=30,Xr=1e3,Zr=3,Kr=function(){function i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.get_config("rageclick");C(this,i),this.clicks=[],this.instance=t,this.enabled=e}return M(i,[{key:"click",value:function(e,n,r){if(!!this.enabled){var a=this.clicks[this.clicks.length-1];a&&Math.abs(e-a.x)+Math.abs(n-a.y)<Jr&&r-a.timestamp<Xr?(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===Zr&&this.instance.capture("$rageclick")):this.clicks=[{x:e,y:n,timestamp:r}]}}}]),i}(),ke={_initializedTokens:[],_previousElementSibling:function(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!er(e));return e},_getPropertiesFromElement:function(t,e,n){var r=t.tagName.toLowerCase(),a={tag_name:r};ot.indexOf(r)>-1&&!n&&(a.$el_text=Dt(t));var o=Ge(t);o.length>0&&(a.classes=o.split(" ").filter(function(d){return d!==""})),w(t.attributes,function(d){nr(t)&&["name","id","class"].indexOf(d.name)===-1||!e&&De(d.value)&&!Yr(d.name)&&(a["attr__"+d.name]=d.value)});for(var s=1,u=1,l=t;l=this._previousElementSibling(l);)s++,l.tagName===t.tagName&&u++;return a.nth_child=s,a.nth_of_type=u,a},_getDefaultProperties:function(t){return{$event_type:t,$ce_version:1}},_extractCustomPropertyValue:function(t){var e=[];return w(document.querySelectorAll(t.css_selector),function(n){var r;["input","select"].indexOf(n.tagName.toLowerCase())>-1?r=n.value:n.textContent&&(r=n.textContent),De(r)&&e.push(r)}),e.join(", ")},_getCustomProperties:function(t){var e=this,n={};return w(this._customProperties,function(r){w(r.event_selectors,function(a){var o=document.querySelectorAll(a);w(o,function(s){m(t,s)&&st(s)&&(n[r.name]=e._extractCustomPropertyValue(r))})})}),n},_getEventTarget:function(t){if(typeof t.target>"u")return t.srcElement||null;var e;return(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null},_captureEvent:function(t,e){var n=this,r=this._getEventTarget(t);if(tr(r)&&(r=r.parentNode||null),t.type==="click"&&t instanceof MouseEvent){var a;(a=this.rageclicks)===null||a===void 0||a.click(t.clientX,t.clientY,new Date().getTime())}if(r&&zr(r,t,this.config)){for(var o=[r],s=r;s.parentNode&&!ge(s,"body");){if(rr(s.parentNode)){o.push(s.parentNode.host),s=s.parentNode.host;continue}o.push(s.parentNode),s=s.parentNode}var u=[],l,d=!1;if(w(o,function(f){var _=st(f);f.tagName.toLowerCase()==="a"&&(l=f.getAttribute("href"),l=_&&De(l)&&l);var p=Ge(f).split(" ");m(p,"ph-no-capture")&&(d=!0),u.push(n._getPropertiesFromElement(f,e.get_config("mask_all_element_attributes"),e.get_config("mask_all_text")))}),e.get_config("mask_all_text")||(u[0].$el_text=Dt(r)),l&&(u[0].attr__href=l),d)return!1;var c=F(this._getDefaultProperties(t.type),{$elements:u},this._getCustomProperties(o));return e.capture("$autocapture",c),!0}},_navigate:function(t){window.location.href=t},_addDomEventHandlers:function(t){var e=this,n=function(a){a=a||window.event,e._captureEvent(a,t)};Pe(document,"submit",n,!1,!0),Pe(document,"change",n,!1,!0),Pe(document,"click",n,!1,!0)},_customProperties:[],rageclicks:null,config:void 0,init:function(t){var e;typeof t.__autocapture!="boolean"&&(this.config=t.__autocapture),(e=this.config)!==null&&e!==void 0&&e.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(n){return new RegExp(n)})),this.rageclicks=new Kr(t)},afterDecideResponse:function(t,e){var n=e.get_config("token");if(this._initializedTokens.indexOf(n)>-1){P.log('autocapture already initialized for token "'+n+'"');return}this._initializedTokens.push(n),t&&t.config&&t.config.enable_collect_everything&&e.get_config("autocapture")?(t.custom_properties&&(this._customProperties=t.custom_properties),this._addDomEventHandlers(e)):e.__autocapture=!1},enabledForProject:function(t,e,n){if(!t)return!0;e=Y(e)?10:e,n=Y(n)?10:n;for(var r=0,a=0;a<t.length;a++)r+=t.charCodeAt(a);return r%e<n},isBrowserSupported:function(){return Jt(document.querySelectorAll)}};Mr(ke);Hr(ke);var en=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,te={is_supported:function(){return!0},error:function(t){P.error("cookieStore error: "+t)},get:function(t){try{for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var a=n[r];a.charAt(0)==" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return decodeURIComponent(a.substring(e.length,a.length))}}catch{}return null},parse:function(t){var e;try{e=JSON.parse(te.get(t))||{}}catch{}return e},set:function(t,e,n,r,a){try{var o="",s="",u="";if(r){var l=document.location.hostname.match(en),d=l?l[0]:"";o=d?"; domain=."+d:""}if(n){var c=new Date;c.setTime(c.getTime()+n*24*60*60*1e3),s="; expires="+c.toUTCString()}a&&(u="; secure");var f=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; path=/"+o+u;return document.cookie=f,f}catch{return}},remove:function(t,e){try{te.set(t,"",-1,e)}catch{return}}},Xe=null,S={is_supported:function(){if(Xe!==null)return Xe;var t=!0;if(window)try{var e="__mplssupport__",n="xyz";S.set(e,n),S.get(e)!=='"xyz"'&&(t=!1),S.remove(e)}catch{t=!1}else t=!1;return t||P.error("localStorage unsupported; falling back to cookie store"),Xe=t,t},error:function(t){P.error("localStorage error: "+t)},get:function(t){try{return window.localStorage.getItem(t)}catch(e){S.error(e)}return null},parse:function(t){try{return JSON.parse(S.get(t))||{}}catch{}return null},set:function(t,e){try{window.localStorage.setItem(t,JSON.stringify(e))}catch(n){S.error(n)}},remove:function(t){try{window.localStorage.removeItem(t)}catch(e){S.error(e)}}},ut=E(E({},S),{},{parse:function(t){try{var e={};try{e=te.parse(t)||{},e.distinct_id&&te.set(t,{distinct_id:e.distinct_id})}catch{}var n=F(e,JSON.parse(S.get(t)||"{}"));return S.set(t,n),n}catch{}return null},set:function(t,e,n,r,a){try{S.set(t,e),e.distinct_id&&te.set(t,{distinct_id:e.distinct_id},n,r,a)}catch(o){S.error(o)}},remove:function(t,e){try{window.localStorage.removeItem(t),te.remove(t,e)}catch(n){S.error(n)}}}),Ne={},tn={is_supported:function(){return!0},error:function(t){P.error("memoryStorage error: "+t)},get:function(t){return Ne[t]||null},parse:function(t){return Ne[t]||null},set:function(t,e){Ne[t]=e},remove:function(t){delete Ne[t]}},pe=null,I={is_supported:function(){if(pe!==null)return pe;if(pe=!0,window)try{var t="__support__",e="xyz";I.set(t,e),I.get(t)!=='"xyz"'&&(pe=!1),I.remove(t)}catch{pe=!1}else pe=!1;return pe},error:function(t){j.DEBUG&&P.error("sessionStorage error: ",t)},get:function(t){try{return window.sessionStorage.getItem(t)}catch(e){I.error(e)}return null},parse:function(t){try{return JSON.parse(I.get(t))||null}catch{}return null},set:function(t,e){try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){I.error(n)}},remove:function(t){try{window.sessionStorage.removeItem(t)}catch(e){I.error(e)}}},rn="__ph_opt_in_out_";function nn(i,t){sr(!0,i,t)}function an(i,t){sr(!1,i,t)}function on(i,t){return or(i,t)==="1"}function ar(i,t){return un(t)?!0:or(i,t)==="0"}function sn(i,t){t=t||{},yt(t).remove(mt(i,t),!!t.crossSubdomainCookie)}function yt(i){return i=i||{},i.persistenceType==="localStorage"?S:i.persistenceType==="localStorage+cookie"?ut:te}function mt(i,t){return t=t||{},(t.persistencePrefix||rn)+i}function or(i,t){return yt(t).get(mt(i,t))}function un(i){if(i&&i.respectDnt){var t=i&&i.window||k,e=t.navigator||{},n=!1;return w([e.doNotTrack,e.msDoNotTrack,t.doNotTrack],function(r){m([!0,1,"1","yes"],r)&&(n=!0)}),n}return!1}function sr(i,t,e){if(!Xt(t)||!t.length){console.error("gdpr."+(i?"optIn":"optOut")+" called with an invalid token");return}e=e||{},yt(e).set(mt(t,e),i?1:0,Dr(e.cookieExpiration)?e.cookieExpiration:null,e.crossSubdomainCookie,e.secureCookie),e.capture&&i&&e.capture(e.captureEventName||"$opt_in",e.captureProperties||{},{send_instantly:!0})}function ur(i,t){var e=!1;try{var n=i.get_config("token"),r=i.get_config("respect_dnt"),a=i.get_config("opt_out_capturing_persistence_type"),o=i.get_config("opt_out_capturing_cookie_prefix")||void 0,s=i.get_config("window");n&&(e=ar(n,{respectDnt:r,persistenceType:a,persistencePrefix:o,window:s}))}catch(u){t||console.error("Unexpected error when checking capturing opt-out status: "+u)}return e}function Lt(i,t,e){return function(){for(var n=ur(i,e),r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];if(!n)return t.apply(this,a);var s=a[a.length-1];typeof s=="function"&&s(0)}}var Ze="$set",cn="$set_once",ln=function(){function i(t){var e=this;C(this,i),this._posthog=t,this.set=Lt(t,function(n,r,a){var o=e.set_action(n,r);return ce(n)&&(a=r),e._get_config("save_referrer")&&e._posthog.persistence.update_referrer_info(document.referrer),o[Ze]=F({},T.people_properties(),e._posthog.persistence.get_referrer_info(),o[Ze]),e._send_request(o,a)}),this.set_once=Lt(t,function(n,r,a){var o=e.set_once_action(n,r);return ce(n)&&(a=r),e._send_request(o,a)})}return M(i,[{key:"toString",value:function(){return this._posthog.toString()+".people"}},{key:"_send_request",value:function(e,n){e.$token=this._get_config("token"),e.$distinct_id=this._posthog.get_distinct_id();var r=this._posthog.get_property("$device_id"),a=this._posthog.get_property("$user_id"),o=this._posthog.get_property("$had_persisted_distinct_id");r&&(e.$device_id=r),a&&(e.$user_id=a),o&&(e.$had_persisted_distinct_id=o);var s=Lr(e),u=Kt(s,this._get_config("properties_string_max_length")),l=JSON.stringify(s),d=Ve(l);return this._posthog._send_request(this._get_config("api_host")+"/engage/",{data:d},{},this._posthog._prepare_callback(n,u)),u}},{key:"_get_config",value:function(e){return this._posthog.get_config(e)}},{key:"_is_reserved_property",value:function(e){return e==="$distinct_id"||e==="$token"||e==="$device_id"||e==="$user_id"||e==="$had_persisted_distinct_id"}},{key:"set_action",value:function(e,n){return this.apiActionParser(Ze,e,n)}},{key:"set_once_action",value:function(e,n){return this.apiActionParser(cn,e,n)}},{key:"apiActionParser",value:function(e,n,r){var a=this,o={},s={};return ce(n)?w(n,function(u,l){a._is_reserved_property(l)||(s[l]=u)}):s[n]=r,o[e]=s,o}}]),i}(),fn=function(t,e){var n=t.featureFlags;if(n)if(Array.isArray(n)){var r={};if(n)for(var a=0;a<n.length;a++)r[n[a]]=!0;e&&e.register({$active_feature_flags:n,$enabled_feature_flags:r})}else e&&e.register({$active_feature_flags:Object.keys(n||{}),$enabled_feature_flags:n||{}});else e&&(e.unregister("$active_feature_flags"),e.unregister("$enabled_feature_flags"))},dn=function(){function i(t){C(this,i),this.instance=t,this._override_warning=!1,this.flagCallReported={},this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return M(i,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property("$enabled_feature_flags"),n=this.instance.get_property("$override_feature_flags");if(!n)return e||{};for(var r=F({},e),a=Object.keys(n),o=0;o<a.length;o++)n[a[o]]===!1?delete r[a[o]]:r[a[o]]=n[a[o]];return this._override_warning||(console.warn("[PostHog] Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this._override_warning=!0),r}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;this.setReloadingPaused(!0);var n=this.instance.get_config("token"),r=JSON.stringify({token:n,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id}),a=Ve(r);this.instance._send_request(this.instance.get_config("api_host")+"/decide/?v=2",{data:a},{method:"POST"},this.instance._prepare_callback(function(o){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(o),e.setReloadingPaused(!1),e._startReloadTimer()}))}},{key:"getFeatureFlag",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.getFlags())return console.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`),!1;var r=this.getFlagVariants()[e];return(n.send_event||!("send_event"in n))&&!this.flagCallReported[e]&&(this.flagCallReported[e]=!0,this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}},{key:"isFeatureEnabled",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.getFlags()?!!this.getFeatureFlag(e,n):(console.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`),!1)}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"receivedFeatureFlags",value:function(e){this.instance.decideEndpointWasHit=!0,fn(e,this.instance.persistence);var n=this.getFlags(),r=this.getFlagVariants();this.featureFlagEventHandlers.forEach(function(a){return a(n,r)})}},{key:"override",value:function(e){if(this._override_warning=!1,e===!1)this.instance.persistence.unregister("$override_feature_flags");else if(Array.isArray(e)){for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;this.instance.persistence.register({$override_feature_flags:n})}else this.instance.persistence.register({$override_feature_flags:e})}},{key:"onFeatureFlags",value:function(e){if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var n=this.getFlags(),r=this.getFlagVariants();e(n,r)}}}]),i}(),_n="__mps",pn="__mpso",hn="__mpus",gn="__mpa",vn="__mpap",yn="__mpr",mn="__mpu",cr="$people_distinct_id",Le="__alias",wn="__cmpns",Ae="__timers",ct="$session_recording_enabled_server_side",Ut="$console_log_recording_enabled_server_side",lt="$sesid",lr="$enabled_feature_flags",bn=[_n,pn,hn,gn,vn,yn,mn,cr,Le,wn,Ae,ct,lt,lr],Sn=function(){function i(t){C(this,i);var e="";t.token&&(e=t.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,t.persistence_name?this.name="ph_"+t.persistence_name:this.name="ph_"+e+"_posthog";var n=t.persistence.toLowerCase();n!=="cookie"&&n.indexOf("localstorage")===-1&&n!=="memory"&&(P.critical("Unknown persistence type "+n+"; falling back to cookie"),n=t.persistence="cookie"),n==="localstorage"&&S.is_supported()?this.storage=S:n==="localstorage+cookie"&&ut.is_supported()?this.storage=ut:n==="memory"?this.storage=tn:this.storage=te,this.load(),this.update_config(t),this.save()}return M(i,[{key:"properties",value:function(){var e={};return w(this.props,function(n,r){if(r===lr&&fe(n)==="object")for(var a=Object.keys(n),o=0;o<a.length;o++)e["$feature/".concat(a[o])]=n[a[o]];else Nr(bn,r)||(e[r]=n)}),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=F({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,n,r){var a=this;if(ce(e)){typeof n>"u"&&(n="None"),this.expire_days=typeof r>"u"?this.default_expiry:r;var o=!1;if(w(e,function(s,u){(!a.props.hasOwnProperty(u)||a.props[u]===n)&&(a.props[u]=s,o=!0)}),o)return this.save(),!0}return!1}},{key:"register",value:function(e,n){var r=this;if(ce(e)){this.expire_days=typeof n>"u"?this.default_expiry:n;var a=!1;if(w(e,function(o,s){e.hasOwnProperty(s)&&r.props[s]!==o&&(r.props[s]=o,a=!0)}),a)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(T.campaignParams()),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(e){this.register(T.searchInfo(e))}},{key:"update_referrer_info",value:function(e){this.register({$referrer:e||this.props.$referrer||"$direct",$referring_domain:T.referringDomain(e)||this.props.$referring_domain||"$direct"})}},{key:"get_referrer_info",value:function(){return at({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(e){return w(this.props,function(n,r){r in e||(e[r]=n)}),e}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,n){var r=this.props[Ae]||{};r[e]=n,this.props[Ae]=r,this.save()}},{key:"remove_event_timer",value:function(e){var n=this.props[Ae]||{},r=n[e];return Y(r)||(delete this.props[Ae][e],this.save()),r}}]),i}(),kn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg==";function En(i){if(i&&fe(i)==="object"){var t=JSON.stringify(i);if(t.length>5e6){var e=/data:([\w\/\-\.]+);(\w+),([^)"]*)/gim,n=t.matchAll(e),r=Ee(n),a;try{for(r.s();!(a=r.n()).done;){var o=a.value;o[1].toLocaleLowerCase().slice(0,6)==="image/"?t=t.replace(o[0],kn):t=t.replace(o[0],"")}}catch(s){r.e(s)}finally{r.f()}}return JSON.parse(t)}return i}var In="rrweb/console@1";function On(i){var t=2e3,e=10;if(i&&fe(i)==="object"&&i.type===Pn&&fe(i.data)==="object"&&i.data.plugin===In){i.data.payload.payload.length>e&&(i.data.payload.payload=i.data.payload.payload.slice(0,e),i.data.payload.payload.push("...[truncated]"));for(var n=[],r=0;r<i.data.payload.payload.length;r++)i.data.payload.payload[r]&&i.data.payload.payload[r].length>t?n.push(i.data.payload.payload[r].slice(0,t)+"...[truncated]"):n.push(i.data.payload.payload[r]);return i.data.payload.payload=n,i}return i}var Fn="/e/",qt=2,Tn=4,An=3,Pn=6,Rn=0,xn=function(){function i(t){C(this,i),this.instance=t,this.captureStarted=!1,this.snapshots=[],this.emit=!1,this.endpoint=Fn,this.stopRrweb=void 0,this.windowId=null,this.sessionId=null,this.receivedDecide=!1}return M(i,[{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled()?this.startCaptureAndTrySendingQueuedSnapshots():this.stopRecording()}},{key:"started",value:function(){return this.captureStarted}},{key:"stopRecording",value:function(){this.captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this.captureStarted=!1)}},{key:"isRecordingEnabled",value:function(){var e=!!this.instance.get_property(ct),n=!this.instance.get_config("disable_session_recording");return e&&n}},{key:"isConsoleLogCaptureEnabled",value:function(){var e=!!this.instance.get_property(Ut),n=this.instance.get_config("enable_recording_console_log");return n!=null?n:e}},{key:"afterDecideResponse",value:function(e){var n;if(this.receivedDecide=!0,this.instance.persistence){var r,a;this.instance.persistence.register((a={},ve(a,ct,!!e.sessionRecording),ve(a,Ut,(r=e.sessionRecording)===null||r===void 0?void 0:r.consoleLogRecordingEnabled),a))}if((n=e.sessionRecording)!==null&&n!==void 0&&n.endpoint){var o;this.endpoint=(o=e.sessionRecording)===null||o===void 0?void 0:o.endpoint}this.startRecordingIfEnabled()}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){var e=this;this.receivedDecide&&(this.emit=!0,this.snapshots.forEach(function(n){return e._captureSnapshot(n)})),this._startCapture()}},{key:"_startCapture",value:function(){typeof Object.assign>"u"||!this.captureStarted&&!this.instance.get_config("disable_session_recording")&&(this.captureStarted=!0,ir(this.instance.get_config("api_host")+"/static/recorder.js?v="+j.LIB_VERSION,this._onScriptLoaded.bind(this)))}},{key:"_updateWindowAndSessionIds",value:function(e){var n,r=e.type===An&&((n=e.data)===null||n===void 0?void 0:n.source)===Rn,a=this.instance.sessionManager.checkAndGetSessionAndWindowId(r,e.timestamp),o=a.windowId,s=a.sessionId;if((this.windowId!==o||this.sessionId!==s)&&[qt,Tn].indexOf(e.type)===-1){var u;(u=this.rrwebRecord)===null||u===void 0||u.takeFullSnapshot()}this.windowId=o,this.sessionId=s}},{key:"_onScriptLoaded",value:function(){var e,n=this,r={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0};this.rrwebRecord=window.rrweb?window.rrweb.record:window.rrwebRecord;for(var a=this.instance.get_config("session_recording"),o=0,s=Object.entries(a||{});o<s.length;o++){var u=gt(s[o],2),l=u[0],d=u[1];l in r&&(r[l]=d)}this.stopRrweb=(e=this.rrwebRecord)===null||e===void 0?void 0:e.call(this,E({emit:function(f){f=On(En(f)),n._updateWindowAndSessionIds(f);var _={$snapshot_data:f,$session_id:n.sessionId,$window_id:n.windowId};n.instance._captureMetrics.incr("rrweb-record"),n.instance._captureMetrics.incr("rrweb-record-".concat(f.type)),n.emit?n._captureSnapshot(_):n.snapshots.push(_)},plugins:window.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled()?[window.rrwebConsoleRecord.getRecordConsolePlugin()]:[]},r)),this.instance._addCaptureHook(function(c){if(c==="$pageview"){var f;(f=n.rrwebRecord)===null||f===void 0||f.addCustomEvent("$pageview",{href:window.location.href})}})}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{transport:"XHR",method:"POST",endpoint:this.endpoint,_noTruncate:!0,_batchKey:"sessionRecording",_metrics:{rrweb_full_snapshot:e.$snapshot_data.type===qt}})}}]),i}(),Cn=function(){function i(t){C(this,i),this.instance=t,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return M(i,[{key:"call",value:function(){var e=this,n=JSON.stringify({token:this.instance.get_config("token"),distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups()}),r=Ve(n);this.instance._send_request("".concat(this.instance.get_config("api_host"),"/decide/?v=2"),{data:r,verbose:!0},{method:"POST"},function(a){return e.parseDecideResponse(a)})}},{key:"parseDecideResponse",value:function(e){var n=this,r;if((e==null?void 0:e.status)===0){console.error("Failed to fetch feature flags from PostHog.");return}if(this.instance.decideEndpointWasHit=!0,!(document&&document.body)){console.log("document not ready yet, trying again in 500 milliseconds..."),setTimeout(function(){n.parseDecideResponse(e)},500);return}if(this.instance.toolbar.afterDecideResponse(e),(r=this.instance.sessionRecording)===null||r===void 0||r.afterDecideResponse(e),ke.afterDecideResponse(e,this.instance),this.instance.featureFlags.receivedFeatureFlags(e),this.instance.compression={},e.supportedCompression&&!this.instance.get_config("disable_compression")){var a={},o=Ee(e.supportedCompression),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;a[u]=!0}}catch(_){o.e(_)}finally{o.f()}this.instance.compression=a}if(e.siteApps)if(this.instance.get_config("opt_in_site_apps")){var l=this.instance.get_config("api_host"),d=Ee(e.siteApps),c;try{var f=function(){var p=c.value,h=p.id,g=p.url,v=document.createElement("script");v.src=[l,l[l.length-1]==="/"&&g[0]==="/"?g.substring(1):g].join(""),v.onerror=function(re){console.error("Error while initializing PostHog app with config id ".concat(h),re)},window["__$$ph_site_app_".concat(h)]=n.instance,document.body.appendChild(v)};for(d.s();!(c=d.n()).done;)f()}catch(_){d.e(_)}finally{d.f()}}else e.siteApps.length>0&&console.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}]),i}(),Mn=["https://app.posthog.com","https://eu.posthog.com"],Nn=["source"],$n=function(){function i(t){C(this,i),this.instance=t}return M(i,[{key:"afterDecideResponse",value:function(e){var n=e.toolbarParams||e.editorParams||(e.toolbarVersion?{toolbarVersion:e.toolbarVersion}:{});e.isAuthenticated&&n.toolbarVersion&&n.toolbarVersion.indexOf("toolbar")===0&&this.loadToolbar(E(E({},n),{},{apiURL:this.instance.get_config("api_host")}))}},{key:"maybeLoadToolbar",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.location,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window.history;try{if(!n){try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test")}catch{return!1}n=window.localStorage}var a=$t(e.hash,"__posthog")||$t(e.hash,"state"),o=a?JSON.parse(decodeURIComponent(a)):null,s=o&&o.action==="ph_authorize",u;return s?(u=o,u.source="url",u&&Object.keys(u).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState("",document.title,e.pathname+e.search):e.hash="")):(u=JSON.parse(n.getItem("_postHogToolbarParams")||"{}"),u.source="localstorage",delete u.userIntent),u.apiURL||(u.apiURL=this.instance.get_config("api_host")),u.token&&this.instance.get_config("token")===u.token?(this.loadToolbar(u),!0):!1}catch{return!1}}},{key:"loadToolbar",value:function(e){var n=this;if(window._postHogToolbarLoaded)return!1;window._postHogToolbarLoaded=!0;var r=(e==null?void 0:e.jsURL)||(e==null?void 0:e.apiURL)||this.instance.get_config("api_host"),a="".concat(r).concat(r.endsWith("/")?"":"/","static/toolbar.js?_ts=").concat(new Date().getTime()),o=!Mn.includes(this.instance.get_config("api_host"))&&this.instance.get_config("advanced_disable_toolbar_metrics"),s=E(E({apiURL:r,jsURL:r,token:this.instance.get_config("token")},e),o?{instrument:!1}:{});s.source;var u=Sr(s,Nn);return window.localStorage.setItem("_postHogToolbarParams",JSON.stringify(u)),ir(a,function(){(window.ph_load_toolbar||window.ph_load_editor)(s,n.instance)}),Pe(window,"turbolinks:load",function(){window._postHogToolbarLoaded=!1,n.loadToolbar(s)}),!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.location,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window.history;return this.maybeLoadToolbar(e,n,r)}}]),i}(),fr=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3e3;C(this,i),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=t}return M(i,[{key:"setPollInterval",value:function(e){this._pollInterval=e,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return new Date().getTime()}}]),i}(),Dn=function(i){Wt(e,i);var t=Vt(e);function e(n,r){var a,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3e3;return C(this,e),a=t.call(this,o),a.handlePollRequest=r,a.captureMetrics=n,a}return M(e,[{key:"enqueue",value:function(r,a,o){this.captureMetrics.incr("batch-enqueue"),this._event_queue.push({url:r,data:a,options:o}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var r=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(r._event_queue.length>0){var a=r.formatQueue(),o=function(l){var d=a[l],c=d.url,f=d.data,_=d.options;w(f,function(p,h){f[h].offset=Math.abs(f[h].timestamp-r.getTime()),delete f[h].timestamp}),r.handlePollRequest(c,f,_),r.captureMetrics.incr("batch-requests"),r.captureMetrics.incr("batch-requests-".concat(c.slice(c.length-2))),r.captureMetrics.incr("batch-handle",f.length),r.captureMetrics.incr("batch-handle-".concat(c.slice(c.length-2)),f.length)};for(var s in a)o(s);r._event_queue.length=0,r._empty_queue_count=0}else r._empty_queue_count++;r._empty_queue_count>4&&(r.isPolling=!1,r._empty_queue_count=0),r.isPolling&&r.poll()},this._pollInterval)}},{key:"updateUnloadMetrics",value:function(){var r=this.formatQueue();for(var a in r){var o=r[a],s=o.url,u=o.data;this.captureMetrics.incr("batch-unload-requests"),this.captureMetrics.incr("batch-unload-requests-".concat(s.slice(s.length-2))),this.captureMetrics.incr("batch-unload",u.length),this.captureMetrics.incr("batch-unload-".concat(s.slice(s.length-2)),u.length)}}},{key:"unload",value:function(){var r=this;clearTimeout(this._poller);var a=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var o=Object.values(a),s=[].concat(rt(o.filter(function(u){return u.url.indexOf("/e")===0})),rt(o.filter(function(u){return u.url.indexOf("/e")!==0})));s.map(function(u){var l=u.url,d=u.data,c=u.options;r.handlePollRequest(l,d,E(E({},c),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var r={};return w(this._event_queue,function(a){var o=a.url,s=a.data,u=a.options,l=(u?u._batchKey:null)||o;r[l]===void 0&&(r[l]={data:[],url:o,options:u}),u&&r[l].options&&r[l].options._metrics&&!r[l].options._metrics.rrweb_full_snapshot&&(r[l].options._metrics.rrweb_full_snapshot=u._metrics.rrweb_full_snapshot),r[l].data.push(s)}),r}}]),e}(fr),Ln=function(){function i(t){C(this,i),this.enabled=t,this.metrics={}}return M(i,[{key:"incr",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.enabled&&(e="phjs-".concat(e),this.metrics[e]=(this.metrics[e]||0)+n)}},{key:"decr",value:function(e){this.enabled&&(e="phjs-".concat(e),this.metrics[e]=(this.metrics[e]||0)-1)}}]),i}(),q=Uint8Array,x=Uint16Array,Ie=Uint32Array,wt=new q([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bt=new q([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bt=new q([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dr=function(t,e){for(var n=new x(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new Ie(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)a[o]=o-n[r]<<5|r;return[n,a]},_r=dr(wt,2),Un=_r[0],ft=_r[1];Un[28]=258,ft[258]=28;var qn=dr(bt,0),Ht=qn[1],dt=new x(32768);for(var b=0;b<32768;++b){var se=(b&43690)>>>1|(b&21845)<<1;se=(se&52428)>>>2|(se&13107)<<2,se=(se&61680)>>>4|(se&3855)<<4,dt[b]=((se&65280)>>>8|(se&255)<<8)>>>1}var Re=function(t,e,n){for(var r=t.length,a=0,o=new x(e);a<r;++a)++o[t[a]-1];var s=new x(e);for(a=0;a<e;++a)s[a]=s[a-1]+o[a-1]<<1;var u;if(n){u=new x(1<<e);var l=15-e;for(a=0;a<r;++a)if(t[a])for(var d=a<<4|t[a],c=e-t[a],f=s[t[a]-1]++<<c,_=f|(1<<c)-1;f<=_;++f)u[dt[f]>>>l]=d}else for(u=new x(r),a=0;a<r;++a)u[a]=dt[s[t[a]-1]++]>>>15-t[a];return u},ye=new q(288);for(var b=0;b<144;++b)ye[b]=8;for(var b=144;b<256;++b)ye[b]=9;for(var b=256;b<280;++b)ye[b]=7;for(var b=280;b<288;++b)ye[b]=8;var Qe=new q(32);for(var b=0;b<32;++b)Qe[b]=5;var Bn=Re(ye,9,0),Hn=Re(Qe,5,0),pr=function(t){return(t/8>>0)+(t&7&&1)},hr=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof x?x:t instanceof Ie?Ie:q)(n-e);return r.set(t.subarray(e,n)),r},ne=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Fe=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Ke=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var a=n.length,o=n.slice();if(!a)return[new q(0),0];if(a==1){var s=new q(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(X,B){return X.f-B.f}),n.push({s:-1,f:25001});var u=n[0],l=n[1],d=0,c=1,f=2;for(n[0]={s:-1,f:u.f+l.f,l:u,r:l};c!=a-1;)u=n[n[d].f<n[f].f?d++:f++],l=n[d!=c&&n[d].f<n[f].f?d++:f++],n[c++]={s:-1,f:u.f+l.f,l:u,r:l};for(var _=o[0].s,r=1;r<a;++r)o[r].s>_&&(_=o[r].s);var p=new x(_+1),h=jn(n[c-1],p,0);if(h>e){var r=0,g=0,v=h-e,re=1<<v;for(o.sort(function(B,R){return p[R.s]-p[B.s]||B.f-R.f});r<a;++r){var J=o[r].s;if(p[J]>e)g+=re-(1<<h-p[J]),p[J]=e;else break}for(g>>>=v;g>0;){var me=o[r].s;p[me]<e?g-=1<<e-p[me]++-1:++r}for(;r>=0&&g;--r){var ae=o[r].s;p[ae]==e&&(--p[ae],++g)}h=e}return[new q(p),h]},jn=function i(t,e,n){return t.s==-1?Math.max(i(t.l,e,n+1),i(t.r,e,n+1)):e[t.s]=n},jt=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new x(++e),r=0,a=t[0],o=1,s=function(d){n[r++]=d},u=1;u<=e;++u)if(t[u]==a&&u!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(a),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(a);o=1,a=t[u]}return[n.subarray(0,r),e]},Te=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Ue=function(t,e,n){var r=n.length,a=pr(e+2);t[a]=r&255,t[a+1]=r>>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<r;++o)t[a+o+4]=n[o];return(a+4+r)*8},Gt=function(t,e,n,r,a,o,s,u,l,d,c){ne(e,c++,n),++a[256];for(var f=Ke(a,15),_=f[0],p=f[1],h=Ke(o,15),g=h[0],v=h[1],re=jt(_),J=re[0],me=re[1],ae=jt(g),X=ae[0],B=ae[1],R=new x(19),y=0;y<J.length;++y)R[J[y]&31]++;for(var y=0;y<X.length;++y)R[X[y]&31]++;for(var de=Ke(R,7),H=de[0],Ce=de[1],N=19;N>4&&!H[Bt[N-1]];--N);var we=d+5<<3,G=Te(a,ye)+Te(o,Qe)+s,Q=Te(a,_)+Te(o,g)+s+14+3*N+Te(R,H)+(2*R[16]+3*R[17]+7*R[18]);if(we<=G&&we<=Q)return Ue(e,c,t.subarray(l,l+d));var Z,O,W,oe;if(ne(e,c,1+(Q<G)),c+=2,Q<G){Z=Re(_,p,0),O=_,W=Re(g,v,0),oe=g;var ze=Re(H,Ce,0);ne(e,c,me-257),ne(e,c+5,B-1),ne(e,c+10,N-4),c+=14;for(var y=0;y<N;++y)ne(e,c+3*y,H[Bt[y]]);c+=3*N;for(var K=[J,X],Oe=0;Oe<2;++Oe)for(var be=K[Oe],y=0;y<be.length;++y){var ee=be[y]&31;ne(e,c,ze[ee]),c+=H[ee],ee>15&&(ne(e,c,be[y]>>>5&127),c+=be[y]>>>12)}}else Z=Bn,O=ye,W=Hn,oe=Qe;for(var y=0;y<u;++y)if(r[y]>255){var ee=r[y]>>>18&31;Fe(e,c,Z[ee+257]),c+=O[ee+257],ee>7&&(ne(e,c,r[y]>>>23&31),c+=wt[ee]);var $=r[y]&31;Fe(e,c,W[$]),c+=oe[$],$>3&&(Fe(e,c,r[y]>>>5&8191),c+=bt[$])}else Fe(e,c,Z[r[y]]),c+=O[r[y]];return Fe(e,c,Z[256]),c+O[256]},Gn=new Ie([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Qn=new q(0),Wn=function(t,e,n,r,a,o){var s=t.length,u=new q(r+s+5*(1+Math.floor(s/7e3))+a),l=u.subarray(r,u.length-a),d=0;if(!e||s<8)for(var c=0;c<=s;c+=65535){var f=c+65535;f<s?d=Ue(l,d,t.subarray(c,f)):(l[c]=o,d=Ue(l,d,t.subarray(c,s)))}else{for(var _=Gn[e-1],p=_>>>13,h=_&8191,g=(1<<n)-1,v=new x(32768),re=new x(g+1),J=Math.ceil(n/3),me=2*J,ae=function(Je){return(t[Je]^t[Je+1]<<J^t[Je+2]<<me)&g},X=new Ie(25e3),B=new x(288),R=new x(32),y=0,de=0,c=0,H=0,Ce=0,N=0;c<s;++c){var we=ae(c),G=c&32767,Q=re[we];if(v[G]=Q,re[we]=G,Ce<=c){var Z=s-c;if((y>7e3||H>24576)&&Z>423){d=Gt(t,l,0,X,B,R,de,H,N,c-N,d),H=y=de=0,N=c;for(var O=0;O<286;++O)B[O]=0;for(var O=0;O<30;++O)R[O]=0}var W=2,oe=0,ze=h,K=G-Q&32767;if(Z>2&&we==ae(c-K))for(var Oe=Math.min(p,Z)-1,be=Math.min(32767,c),ee=Math.min(258,Z);K<=be&&--ze&&G!=Q;){if(t[c+W]==t[c+W-K]){for(var $=0;$<ee&&t[c+$]==t[c+$-K];++$);if($>W){if(W=$,oe=K,$>Oe)break;for(var yr=Math.min(K,$-2),It=0,O=0;O<yr;++O){var Ye=c-K+O+32768&32767,mr=v[Ye],Ot=Ye-mr+32768&32767;Ot>It&&(It=Ot,Q=Ye)}}}G=Q,Q=v[G],K+=G-Q+32768&32767}if(oe){X[H++]=268435456|ft[W]<<18|Ht[oe];var Ft=ft[W]&31,Tt=Ht[oe]&31;de+=wt[Ft]+bt[Tt],++B[257+Ft],++R[Tt],Ce=c+W,++y}else X[H++]=t[c],++B[t[c]]}}d=Gt(t,l,o,X,B,R,de,H,N,c-N,d),o||(d=Ue(l,d,Qn))}return hr(u,0,r+pr(d)+a)},Vn=function(){for(var i=new Ie(256),t=0;t<256;++t){for(var e=t,n=9;--n;)e=(e&1&&3988292384)^e>>>1;i[t]=e}return i}(),zn=function(){var t=4294967295;return{p:function(n){for(var r=t,a=0;a<n.length;++a)r=Vn[r&255^n[a]]^r>>>8;t=r},d:function(){return t^4294967295}}},Yn=function(t,e,n,r,a){return Wn(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,r,!a)},_t=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Jn=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&_t(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},Xn=function(t){return 10+(t.filename&&t.filename.length+1||0)};function Zn(i,t){t===void 0&&(t={});var e=zn(),n=i.length;e.p(i);var r=Yn(i,t,Xn(t),8),a=r.length;return Jn(r,t),_t(r,a-8,e.d()),_t(r,a-4,n),r}function Kn(i,t){var e=i.length;if(!t&&typeof TextEncoder<"u")return new TextEncoder().encode(i);for(var n=new q(i.length+(i.length>>>1)),r=0,a=function(d){n[r++]=d},o=0;o<e;++o){if(r+5>n.length){var s=new q(r+8+(e-o<<1));s.set(n),n=s}var u=i.charCodeAt(o);u<128||t?a(u):u<2048?(a(192|u>>>6),a(128|u&63)):u>55295&&u<57344?(u=65536+(u&1023<<10)|i.charCodeAt(++o)&1023,a(240|u>>>18),a(128|u>>>12&63),a(128|u>>>6&63),a(128|u&63)):(a(224|u>>>12),a(128|u>>>6&63),a(128|u&63))}return hr(n,0,r)}var z;(function(i){i.GZipJS="gzip-js",i.LZ64="lz64",i.Base64="base64"})(z||(z={}));function ei(i){return i[z.GZipJS]?z.GZipJS:i[z.LZ64]?z.LZ64:z.Base64}function ti(i,t,e){return i===z.LZ64?[{data:D.compressToBase64(t),compression:z.LZ64},e]:i===z.GZipJS?[Zn(Kn(t),{mtime:0}),E(E({},e),{},{blob:!0,urlQueryArgs:{compression:z.GZipJS}})]:[{data:Ve(t)},e]}var ri=function(t,e,n){var r=e||{};r.ip=n.ip?1:0,r._=new Date().getTime().toString(),r.ver=j.LIB_VERSION;var a=t.split("?");if(a.length>1){var o=a[1].split("&"),s=Ee(o),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,d=l.split("=")[0];r[d]&&delete r[d]}}catch(f){s.e(f)}finally{s.f()}}var c=t.indexOf("?")>-1?"&":"?";return t+c+Vr(r)},St=function i(t,e){if(e.blob&&t.buffer)return new Blob([t.buffer],{type:"text/plain"});if(e.sendBeacon||e.blob){var n=i(t,{method:"POST"});return new Blob([n],{type:"application/x-www-form-urlencoded"})}if(e.method!=="POST")return null;var r,a=function(s){return Object.prototype.toString.call(s)==="[object Uint8Array]"};return Array.isArray(t)||a(t)?r="data="+encodeURIComponent(t):r="data="+encodeURIComponent(t.data),"compression"in t&&t.compression&&(r+="&compression="+t.compression),r},gr=function(t){var e=t.url,n=t.data,r=t.headers,a=t.options,o=t.captureMetrics,s=t.callback,u=t.retriesPerformedSoFar,l=t.retryQueue,d=t.onXHRError,c=new XMLHttpRequest;c.open(a.method||"GET",e,!0);var f=St(n,a);o.incr("_send_request"),o.incr("_send_request_inflight"),w(r,function(_,p){c.setRequestHeader(p,_)}),a.method==="POST"&&!a.blob&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.withCredentials=!0,c.onreadystatechange=function(){if(c.readyState===4)if(o.incr("xhr-response"),o.incr("xhr-response-".concat(c.status)),o.decr("_send_request_inflight"),c.status===200){if(s){var _;try{_=JSON.parse(c.responseText)}catch(p){P.error(p);return}s(_)}}else typeof d=="function"&&d(c),[401,403,404,500].indexOf(c.status)<0&&l.enqueue({url:e,data:n,options:a,headers:r,retriesPerformedSoFar:(u||0)+1,callback:s}),s&&s({status:0})},c.send(f)},ni=function(i){Wt(e,i);var t=Vt(e);function e(n,r){var a;return C(this,e),a=t.call(this),a.captureMetrics=n,a.isPolling=!1,a.queue=[],a.areWeOnline=!0,a.onXHRError=r,"onLine"in window.navigator&&(a.areWeOnline=window.navigator.onLine,window.addEventListener("online",function(){a._handleWeAreNowOnline()}),window.addEventListener("offline",function(){a.areWeOnline=!1})),a}return M(e,[{key:"enqueue",value:function(r){var a=r.retriesPerformedSoFar||0;if(!(a>=10)){var o=3e3*Math.pow(2,a),s=new Date(Date.now()+o);console.warn("Enqueued failed request for retry in ".concat(o)),this.queue.push({retryAt:s,requestData:r}),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var r=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){r.areWeOnline&&r.queue.length>0&&r.flush(),r.poll()},this._pollInterval)}},{key:"flush",value:function(){var r=new Date(Date.now()),a=this.queue.filter(function(l){var d=l.retryAt;return d<r});if(a.length>0){this.queue=this.queue.filter(function(l){var d=l.retryAt;return d>=r});var o=Ee(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value.requestData;this._executeXhrRequest(u)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var r=Ee(this.queue),a;try{for(r.s();!(a=r.n()).done;){var o=a.value.requestData,s=o.url,u=o.data,l=o.options;try{window.navigator.sendBeacon(s,St(u,E(E({},l),{},{sendBeacon:!0})))}catch(d){j.DEBUG&&console.error(d)}}}catch(d){r.e(d)}finally{r.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(r){var a=r.url,o=r.data,s=r.options,u=r.headers,l=r.callback,d=r.retriesPerformedSoFar;gr({url:a,data:o||{},options:s||{},headers:u||{},retriesPerformedSoFar:d||0,callback:l,captureMetrics:this.captureMetrics,retryQueue:this,onXHRError:this.onXHRError})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),e}(fr),ii=30*60*1e3,ai=24*3600*1e3,oi=function(){function i(t,e){C(this,i),this.persistence=e,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null;var n=t.persistence_name||t.token;if(this.window_id_storage_key="ph_"+n+"_window_id",this.primary_window_exists_storage_key="ph_"+n+"_primary_window_exists",!this.persistence.disabled&&I.is_supported()){var r=I.parse(this.window_id_storage_key),a=I.parse(this.primary_window_exists_storage_key);r&&!a?this._windowId=r:I.remove(this.window_id_storage_key),I.set(this.primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return M(i,[{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,!this.persistence.disabled&&I.is_supported()&&I.set(this.window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:!this.persistence.disabled&&I.is_supported()?I.parse(this.window_id_storage_key):null}},{key:"_setSessionId",value:function(e,n,r){(e!==this._sessionId||n!==this._sessionActivityTimestamp||r!==this._sessionStartTimestamp)&&(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register(ve({},lt,[n,e,r])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[lt];return Array.isArray(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;window.addEventListener("beforeunload",function(){!e.persistence.disabled&&I.is_supported()&&I.remove(e.primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=n||new Date().getTime(),a=this._getSessionId(),o=gt(a,3),s=o[0],u=o[1],l=o[2],d=this._getWindowId(),c=l&&l>0&&Math.abs(r-l)>ai;!u||!e&&Math.abs(r-s)>ii||c?(u=le(),d=le(),l=r):d||(d=le());var f=s===0||!e||c?r:s,_=l===0?new Date().getTime():l;return this._setWindowId(d),this._setSessionId(u,f,_),{sessionId:u,windowId:d}}}]),i}();function si(i){return Number(i)===i&&i%1!==0}function ui(i){return i.forEach(function(t,e){for(var n in t){var r=n;si(t[r])&&t[r].toString().match(/^\d+\.\d{4,}$/)&&(i[e][r]=Number(t[r].toFixed(3))),r==="serverTiming"&&t[r].length===0&&delete i[e][r],r==="entryType"&&t[r]==="resource"&&delete i[e][r],r==="nextHopProtocol"&&delete i[e][r],t[r]===0&&delete i[e][r]}}),ci(i)}function et(i){try{var t=JSON.parse(JSON.stringify(k.performance.getEntriesByType(i)));return ui(t)}catch(e){return j.DEBUG&&console.warn("not able to capture performance data ("+i+") - "+e),[]}}function ci(i){if(i.length===0)return[];var t=Object.keys(i[0]);return[t,i.map(function(e){return t.map(function(n){return e[n]})})]}function li(i){var t=i.navigation&&i.navigation[0],e=i.navigation&&i.navigation[1]&&i.navigation[1][0],n=t&&t.indexOf("duration");if(n>-1)return e[n];var r=t&&t.indexOf("loadEventEnd"),a=t&&t.indexOf("startTime");if(r>-1){var o=e&&e[r],s=e&&e[a]||0;return o-s}}function fi(){var i={navigation:et("navigation"),paint:et("paint"),resource:et("resource")};fe(k)!==void 0&&k.performance&&k.performance.clearResourceTimings&&k.performance.clearResourceTimings();var t={},e=li(i);return e&&(t.$performance_page_loaded=e),t.$performance_raw=JSON.stringify(i),t}var di=M(function i(t,e,n,r){C(this,i),this.name="posthog-js",this.setupOnce=function(a){a(function(o){var s,u,l;if(o.level!=="error"||!t.__loaded)return o;o.tags||(o.tags={});var d=t.config.ui_host||t.config.api_host;o.tags["PostHog Person URL"]=d+"/person/"+t.get_distinct_id(),t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=d+"/recordings/#sessionRecordingId="+t.sessionManager.checkAndGetSessionAndWindowId(!0).sessionId);var c=((s=o.exception)===null||s===void 0?void 0:s.values)||[],f={$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:(u=c[0])===null||u===void 0?void 0:u.value,$sentry_exception_type:(l=c[0])===null||l===void 0?void 0:l.type,$sentry_tags:o.tags};return e&&n&&(f.$sentry_url=(r||"https://sentry.io/organizations/")+e+"/issues/?project="+n+"&query="+o.event_id),t.capture("$exception",f),o})}}),_i=function(t){var e=function(r,a){!r.event.userId&&r.event.anonymousId!==t.get_distinct_id()&&t.reset(),r.event.userId&&r.event.userId!==t.get_distinct_id()&&(t.register({distinct_id:r.event.userId}),t.reloadFeatureFlags());var o=t._calculate_event_properties(a,r.event.properties);return r.event.properties=Object.assign({},o,r.event.properties),r};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(r){return e(r,r.event.event)},page:function(r){return e(r,"$pageview")},identify:function(r){return e(r,"$identify")},screen:function(r){return e(r,"$screen")}}},pi=function(){function i(){C(this,i),ve(this,"_seenFirstPageView",!1)}return M(i,[{key:"onPageview",value:function(){this._seenFirstPageView&&(this._pageViewId=le()),this._seenFirstPageView=!0}},{key:"getPageViewId",value:function(){return this._pageViewId||(this._pageViewId=le()),this._pageViewId}}]),i}(),xe;(function(i){i[i.INIT_MODULE=0]="INIT_MODULE",i[i.INIT_SNIPPET=1]="INIT_SNIPPET"})(xe||(xe={}));var kt,A,pt=function(){},$e={},U="posthog",qe=k.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,vr=!qe&&V.indexOf("MSIE")===-1&&V.indexOf("Mozilla")===-1,Qt=function(){var t,e,n;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(L==null||(t=L.location)===null||t===void 0||(e=t.hostname)===null||e===void 0?void 0:e.indexOf("herokuapp.com"))===-1,persistence:"cookie",persistence_name:"",cookie_name:"",loaded:pt,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,capture_pageview:!0,debug:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:(k==null||(n=k.location)===null||n===void 0?void 0:n.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{blockClass:"ph-no-capture",blockSelector:null,ignoreClass:"ph-ignore-input",maskAllInputs:!0,maskInputOptions:{},maskInputFn:null,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(a){var o="Bad HTTP status: "+a.status+" "+a.statusText;console.error(o)},get_device_id:function(a){return a},_onCapture:pt,_capture_metrics:!1,_capture_performance:!1,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1}},ht=function(t,e,n){var r,a=n===U||!A?A:n?A[n]:void 0;if(a&&kt===xe.INIT_MODULE)r=a;else{if(a&&!ie(a)){console.error("You have already initialized "+n);return}r=new Et}if(r._init(t,e,n),r.toolbar.maybeLoadToolbar(),r.sessionRecording=new xn(r),r.sessionRecording.startRecordingIfEnabled(),r.__autocapture=r.get_config("autocapture"),r.get_config("autocapture")){r.__autocapture=r.get_config("autocapture");var o=100,s=100;ke.enabledForProject(r.get_config("token"),o,s)?ke.isBrowserSupported()?ke.init(r):(r.__autocapture=!1,P.log("Disabling Automatic Event Collection because this browser is not supported")):(r.__autocapture=!1,P.log("Not in active bucket: disabling Automatic Event Collection."))}return j.DEBUG=j.DEBUG||r.get_config("debug"),typeof a<"u"&&ie(a)&&(r._execute_array.call(r.people,a.people),r._execute_array(a)),r},Et=function(){function i(){var t=this;C(this,i),this.config=Qt(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=di,this.segmentIntegration=function(){return _i(t)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__autocapture=void 0,this._jsc=function(){},this.people=new ln(this),this.featureFlags=new dn(this),this.feature_flags=this.featureFlags,this.toolbar=new $n(this),this.pageViewIdManager=new pi,this._captureMetrics=void 0,this._requestQueue=void 0,this._retryQueue=void 0,this.persistence=void 0,this.sessionManager=void 0}return M(i,[{key:"init",value:function(e,n,r){if(Y(r)){console.error("You must name your new library: init(token, config, name)");return}if(r===U){console.error("You must initialize the main posthog object right after you include the PostHog js snippet");return}var a=ht(e,n,r);return A[r]=a,a._loaded(),a}},{key:"_init",value:function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(F({},Qt(),r,{name:a,token:e,callback_fn:(a===U?a:U+"."+a)+"._jsc"})),this._jsc=function(){},this._captureMetrics=new Ln(this.get_config("_capture_metrics")),this._requestQueue=new Dn(this._captureMetrics,this._handle_queued_event.bind(this)),this._retryQueue=new ni(this._captureMetrics,this.get_config("on_xhr_error")),this.__captureHooks=[],this.__request_queue=[],this.persistence=new Sn(this.config),this.sessionManager=new oi(this.config,this.persistence),this._gdpr_init(),r.segment&&(this.config.get_device_id=function(){return r.segment.user().anonymousId()},r.segment.user().id()&&this.register({distinct_id:r.segment.user().id()}),r.segment.register(this.segmentIntegration())),((n=r.bootstrap)===null||n===void 0?void 0:n.distinctID)!==void 0){var o,s=this.get_config("get_device_id")(le()),u=(o=r.bootstrap)!==null&&o!==void 0&&o.isIdentifiedID?s:r.bootstrap.distinctID;this.register({distinct_id:r.bootstrap.distinctID,$device_id:u})}if(this._hasBootstrappedFeatureFlags()){var l,d=Object.keys(((l=r.bootstrap)===null||l===void 0?void 0:l.featureFlags)||{}).filter(function(f){var _,p;return!!((_=r.bootstrap)!==null&&_!==void 0&&(p=_.featureFlags)!==null&&p!==void 0&&p[f])}).reduce(function(f,_){var p,h;return f[_]=((p=r.bootstrap)===null||p===void 0||(h=p.featureFlags)===null||h===void 0?void 0:h[_])||!1,f},{});this.featureFlags.receivedFeatureFlags({featureFlags:d})}if(!this.get_distinct_id()){var c=this.get_config("get_device_id")(le());this.register_once({distinct_id:c,$device_id:c},"")}k.addEventListener&&k.addEventListener("onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this))}},{key:"_loaded",value:function(){this.featureFlags.setReloadingPaused(!0);try{this.get_config("loaded")(this)}catch(e){console.error("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.get_config("capture_pageview")&&this.capture("$pageview",{},{send_instantly:!0}),this.get_config("advanced_disable_decide")||new Cn(this).call(),this.featureFlags.resetRequestQueue(),this.featureFlags.setReloadingPaused(!1)}},{key:"_start_queue_if_opted_in",value:function(){this.has_opted_out_capturing()||this.get_config("request_batching")&&this._requestQueue.poll()}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||ue(this.__request_queue,function(n){e._send_request.apply(e,rt(n))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(e,n){if(Y(e))return null;if(qe)return function(s){e(s,n)};var r=this._jsc,a=""+Math.floor(Math.random()*1e8),o=this.get_config("callback_fn")+"["+a+"]";return r[a]=function(s){delete r[a],e(s,n)},o}},{key:"_handle_unload",value:function(){if(!this.get_config("request_batching")){this.get_config("capture_pageview")&&this.capture("$pageleave",null,{transport:"sendBeacon"});return}this.get_config("capture_pageview")&&this.capture("$pageleave"),this.get_config("_capture_metrics")&&(this._requestQueue.updateUnloadMetrics(),this.capture("$capture_metrics",this._captureMetrics.metrics)),this._requestQueue.unload(),this._retryQueue.unload()}},{key:"_handle_queued_event",value:function(e,n,r){var a=JSON.stringify(n);this.__compress_and_send_json_request(e,a,r||$e,pt)}},{key:"__compress_and_send_json_request",value:function(e,n,r,a){var o=ti(ei(this.compression),n,r),s=gt(o,2),u=s[0],l=s[1];this._send_request(e,u,l,a)}},{key:"_send_request",value:function(e,n,r,a){if(vr){this.__request_queue.push([e,n,r,a]);return}var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")};r=F(o,r||{}),qe||(r.method="GET");var s="sendBeacon"in k.navigator&&r.transport==="sendBeacon";if(e=ri(e,r.urlQueryArgs||{},{ip:this.get_config("ip")}),ce(n)&&this.get_config("img")){var u=L.createElement("img");u.src=e,L.body.appendChild(u)}else if(s)try{k.navigator.sendBeacon(e,St(n,E(E({},r),{},{sendBeacon:!0})))}catch(f){this.get_config("debug")&&console.error(f)}else if(qe)try{gr({url:e,data:n,headers:this.get_config("xhr_headers"),options:r,captureMetrics:this._captureMetrics,callback:a,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.get_config("on_xhr_error")})}catch(f){console.error(f)}else{var l,d=L.createElement("script");d.type="text/javascript",d.async=!0,d.defer=!0,d.src=e;var c=L.getElementsByTagName("script")[0];(l=c.parentNode)===null||l===void 0||l.insertBefore(d,c)}}},{key:"_execute_array",value:function(e){var n=this,r,a=[],o=[],s=[];ue(e,function(l){l&&(r=l[0],ie(r)?s.push(l):typeof l=="function"?l.call(n):ie(l)&&r==="alias"?a.push(l):ie(l)&&r.indexOf("capture")!==-1&&typeof n[r]=="function"?s.push(l):o.push(l))});var u=function(d,c){ue(d,function(f){if(ie(f[0])){var _=c;w(f,function(p){_=_[p[0]].apply(_,p.slice(1))})}else this[f[0]].apply(this,f.slice(1))},c)};u(a,this),u(o,this),u(s,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$e;if(!!this.__loaded&&!ur(this,!1)){this._captureMetrics.incr("capture"),e==="$snapshot"&&this._captureMetrics.incr("snapshot"),r=r||$e;var a=r.transport;if(a&&(r.transport=a),Y(e)||typeof e!="string"){console.error("No event name provided to posthog.capture");return}if(!Wr(V)){this.persistence.update_search_keyword(L.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(L.referrer);var o={event:e,properties:this._calculate_event_properties(e,n||{})};e==="$identify"&&r.$set&&(o.$set=r.$set),o=Kt(o,r._noTruncate?null:this.get_config("properties_string_max_length")),o.timestamp=r.timestamp||new Date,this.get_config("debug")&&P.log("PostHog.js send",o);var s=JSON.stringify(o),u=this.get_config("api_host")+(r.endpoint||"/e/"),l=r!==$e;return this.get_config("request_batching")&&(!l||r._batchKey)&&!r.send_instantly?this._requestQueue.enqueue(u,o,r):this.__compress_and_send_json_request(u,s,r),this._invokeCaptureHooks(e,o),o}}}},{key:"_addCaptureHook",value:function(e){this.__captureHooks.push(e)}},{key:"_invokeCaptureHooks",value:function(e,n){this.config._onCapture(e,n),w(this.__captureHooks,function(r){return r(e)})}},{key:"_calculate_event_properties",value:function(e,n){var r=this.persistence.remove_event_timer(e),a=E({},n);if(a.token=this.get_config("token"),e==="$snapshot"){var o=this.persistence.properties();return a.distinct_id=o.distinct_id,a}if(typeof r<"u"){var s=new Date().getTime()-r;a.$duration=parseFloat((s/1e3).toFixed(3))}if(this.sessionManager){var u=this.sessionManager.checkAndGetSessionAndWindowId(),l=u.sessionId,d=u.windowId;a.$session_id=l,a.$window_id=d}a=F({},T.properties(),this.persistence.properties(),a),this.get_config("_capture_performance")&&(e==="$pageview"&&this.pageViewIdManager.onPageview(),a=F(a,{$pageview_id:this.pageViewIdManager.getPageViewId()})),e==="$pageview"&&this.get_config("_capture_performance")&&(a=F(a,fi()));var c=this.get_config("property_blacklist");ie(c)?w(c,function(_){delete a[_]}):console.error("Invalid value for property_blacklist config: "+c);var f=this.get_config("sanitize_properties");return f&&(a=f(a,e)),a}},{key:"register",value:function(e,n){this.persistence.register(e,n)}},{key:"register_once",value:function(e,n,r){this.persistence.register_once(e,n,r)}},{key:"unregister",value:function(e){this.persistence.unregister(e)}},{key:"_register_single",value:function(e,n){this.register(ve({},e,n))}},{key:"getFeatureFlag",value:function(e,n){return this.featureFlags.getFeatureFlag(e,n)}},{key:"isFeatureEnabled",value:function(e,n){return this.featureFlags.isFeatureEnabled(e,n)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"identify",value:function(e,n,r){if(!e){console.error("Unique user id has not been set in posthog.identify");return}this._captureMetrics.incr("identify");var a=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var o=a;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}e!==a&&e!==this.get_property(Le)&&(this.unregister(Le),this.register({distinct_id:e})),e!==a&&(!this.get_property("$device_id")||a===this.get_property("$device_id"))?(this.capture("$identify",{distinct_id:e,$anon_distinct_id:a},{$set:n||{},$set_once:r||{}}),this.featureFlags.setAnonymousDistinctId(a)):(n&&this.people.set(n),r&&this.people.set_once(r)),e!==a&&this.reloadFeatureFlags()}},{key:"group",value:function(e,n,r){if(!e||!n){console.error("posthog.group requires a group type and group key");return}this._captureMetrics.incr("group");var a=this.getGroups();this.register({$groups:E(E({},a),{},ve({},e,n))}),r&&this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),a[e]!==n&&this.reloadFeatureFlags()}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.reloadFeatureFlags()}},{key:"reset",value:function(e){var n=this.get_property("$device_id");this.persistence.clear(),this.sessionManager.resetSessionId();var r=this.get_config("get_device_id")(le());this.register_once({distinct_id:r,$device_id:e?r:n},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"alias",value:function(e,n){return e===this.get_property(cr)?(P.critical("Attempting to create alias for existing People user - aborting."),-2):(Y(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Le,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(console.error("alias matches current distinct_id - skipping api call."),this.identify(e),-1))}},{key:"set_config",value:function(e){var n=E({},this.config);ce(e)&&(F(this.config,e),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),S.is_supported()&&S.get("ph_debug")==="true"&&(this.config.debug=!0),this.get_config("debug")&&(j.DEBUG=!0),this.sessionRecording&&typeof e.disable_session_recording<"u"&&n.disable_session_recording!==e.disable_session_recording&&(e.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!!((e=this.sessionRecording)!==null&&e!==void 0&&e.started())}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_config",value:function(e){var n;return(n=this.config)===null||n===void 0?void 0:n[e]}},{key:"get_property",value:function(e){return this.persistence.props[e]}},{key:"toString",value:function(){var e,n=(e=this.get_config("name"))!==null&&e!==void 0?e:U;return n!==U&&(n=U+"."+n),n}},{key:"_gdpr_init",value:function(){var e=this.get_config("opt_out_capturing_persistence_type")==="localStorage";e&&S.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_capturing()&&(this.get_config("opt_out_capturing_by_default")||te.get("ph_optout"))&&(te.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.get_config("opt_out_persistence_by_default")}))}},{key:"_gdpr_update_persistence",value:function(e){var n;if(e&&e.clear_persistence)n=!0;else if(e&&e.enable_persistence)n=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==n&&this.persistence.set_disabled(n)}},{key:"_gdpr_call_func",value:function(e,n){return n=F({capture:this.capture.bind(this),persistence_type:this.get_config("opt_out_capturing_persistence_type"),cookie_prefix:this.get_config("opt_out_capturing_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),secure_cookie:this.get_config("secure_cookie")},n||{}),!S.is_supported()&&n.persistence_type==="localStorage"&&(n.persistence_type="cookie"),e(this.get_config("token"),{capture:n.capture,captureEventName:n.capture_event_name,captureProperties:n.capture_properties,persistenceType:n.persistence_type,persistencePrefix:n.cookie_prefix,cookieExpiration:n.cookie_expiration,crossSubdomainCookie:n.cross_subdomain_cookie,secureCookie:n.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=F({enable_persistence:!0},e||{}),this._gdpr_call_func(nn,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var n=F({clear_persistence:!0},e||{});this._gdpr_call_func(an,n),this._gdpr_update_persistence(n)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(on,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(ar,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var n=F({enable_persistence:!0},e!=null?e:{});this._gdpr_call_func(sn,n),this._gdpr_update_persistence(n)}},{key:"debug",value:function(e){e===!1?(k.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(k.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}},{key:"decodeLZ64",value:function(e){return D.decompressFromBase64(e||null)}}]),i}();Br(Et,["identify"]);var Se={},hi=function(){w(Se,function(t,e){e!==U&&(A[e]=t)})},gi=function(){A.init=function(t,e,n){if(n)return A[n]||(A[n]=Se[n]=ht(t||"",e||{},n),A[n]._loaded()),A[n];var r=A;return Se[U]?r=Se[U]:t&&(r=ht(t,e||{},U),r._loaded(),Se[U]=r),A=r,kt===xe.INIT_SNIPPET&&(k[U]=A),hi(),r}},vi=function(){function t(){t.done||(t.done=!0,vr=!1,w(Se,function(e){e._dom_loaded()}))}L.addEventListener&&(L.readyState==="complete"?t():L.addEventListener("DOMContentLoaded",t,!1)),Pe(k,"load",t,!0)};function yi(){return kt=xe.INIT_MODULE,A=new Et,gi(),A.init(),vi(),A}var wi=yi();export{z as Compression,Et as PostHog,wi as default,wi as posthog};
